<?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="memberns">
    
    <!-- 로그인 인증 -->
    <select id="login_check" parameterType="String" resultType="member">
     select * from member where member_id=#{id}
    </select>
    
    <!-- 비번 인증 -->
    <select id="pw_check" parameterType="String" resultType="member">
     select * from member where member_id=#{id}
    </select>
   
     <!-- 닉네임 인증 -->
    <select id="nick_check" parameterType="String" resultType="member">
     select * from member where member_nickname=#{nick}
    </select>
    
    <!-- 비번 검색 -->
    <select id="pwd_find" resultType="member" parameterType="member">
     select *  from member where member_id=#{member_id} and member_name=#{member_name}
    </select>
    
    <!-- 회원저장 -->
   <insert id="member_join" parameterType="member">
     insert into member (member_id,member_passwd,member_name,
     member_nickname,member_gender,member_phone,member_age,
     member_email,member_address,member_file,member_delok) 
     values(#{member_id},#{member_passwd},#{member_name},
     #{member_nickname},#{member_gender},#{member_phone},
     #{member_age},#{member_email},#{member_address},
     #{member_file, jdbcType=VARCHAR},'y')
    <!-- jdbcType=VARCHAR = null값 허용 -->
    </insert>
    
    <!-- 회원수정 -->
    <update id="member_edit" parameterType="member">
     update member set member_passwd=#{member_passwd},member_name=#{member_name},
     member_gender=#{member_gender},member_phone=#{member_phone},
     member_age=#{member_age},member_email=#{member_email},
     member_address=#{member_address},member_file=#{member_file,jdbcType=VARCHAR} 
     where member_id=#{member_id}
    </update>    
    
    <!-- 회원삭제 -->
    <update id="member_delete" parameterType="member">
      update join_member set join_delcont=#{join_delcont}, join_state=2,
      join_deldate=sysdate where join_id=#{join_id}
    </update>
    
</mapper>








